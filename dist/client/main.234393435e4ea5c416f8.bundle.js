webpackJsonp([0,3],{323:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return a});var i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(){}return t=i([n.i(o.Component)({selector:"app-todo",template:n(661)}),r("design:paramtypes",[])],t)}()},324:function(t,e,n){"use strict";var o=n(0),i=n(95);n.d(e,"a",function(){return c});var r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.authService=t,this.title="Another 1500 Todo App"}return t=r([n.i(o.Component)({selector:"app-root",template:n(662)}),a("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.a&&i.a)&&e||Object])],t);var e}()},325:function(t,e,n){"use strict";var o=n(0),i=n(95);n.d(e,"a",function(){return c});var r=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},a=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},c=function(){function t(t){this.authService=t}return t=r([n.i(o.Component)({selector:"app-home",template:n(664),styles:[n(659)]}),a("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.a&&i.a)&&e||Object])],t);var e}()},326:function(t,e,n){"use strict";var o=n(0),i=n(129),r=n(205),a=(n.n(r),n(367));n.n(a);n.d(e,"a",function(){return l});var c=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},s=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},l=function(){function t(t,e){this.http=t,this.authHttp=e,this.headers=new i.Headers({"Content-Type":"application/json"})}return t.prototype.getAll=function(t){return this.authHttp.get("api/todos/"+t).toPromise().then(function(t){var e=t.json();if(e.err)throw new Error(e.err);return e.data}).catch(this.handleError)},t.prototype.getTodo=function(t){return this.authHttp.get("api/todo/"+t).toPromise().then(function(t){var e=t.json();if(e.err)throw new Error(e.err);return e.data}).catch(this.handleError)},t.prototype.create=function(t){return this.authHttp.post("api/todo/",JSON.stringify(t),{headers:this.headers}).toPromise().then(function(t){var e=t.json();if(e.err)throw new Error(e.err);return null}).catch(this.handleError)},t.prototype.update=function(t){return this.authHttp.put("api/todo/"+t._id,JSON.stringify(t),{headers:this.headers}).toPromise().then(function(t){var e=t.json();if(e.err)throw new Error(e.err);return null}).catch(this.handleError)},t.prototype.updateAll=function(t,e){return this.authHttp.put("api/todos/"+e,JSON.stringify({todos:t}),{headers:this.headers}).toPromise().then(function(t){var e=t.json();if(e.err)throw new Error(e.err);return null}).catch(this.handleError)},t.prototype.delete=function(t){return this.authHttp.delete("api/todo/"+t,{headers:this.headers}).toPromise().then(function(t){var e=t.json();if(e.err)throw new Error(e.err);return null}).catch(this.handleError)},t.prototype.handleError=function(t){return Promise.reject(t.message||t)},t=c([n.i(o.Injectable)(),s("design:paramtypes",["function"==typeof(e="undefined"!=typeof i.Http&&i.Http)&&e||Object,"function"==typeof(a="undefined"!=typeof r.AuthHttp&&r.AuthHttp)&&a||Object])],t);var e,a}()},327:function(t,e,n){"use strict";var o=n(0),i=n(135),r=n(326),a=n(95),c=n(366);n.n(c);n.d(e,"a",function(){return d});var s=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e,n,o){var i=this;this.todoService=t,this.router=e,this.authService=n,this.dragulaService=o,this.showDialog={visible:!1,type:""},o.drop.subscribe(function(t){i.onDrop(t.slice(1))})}return t.prototype.onDrop=function(t){var e=t[0],n=(t[1],t[2],t[3]),o=this.todos.find(function(t){return t._id===e.getAttribute("id")}),i=n?this.todos.find(function(t){return t._id===n.getAttribute("id")}):void 0,r=this.todos.reduce(function(t,e){return t.position>e.position?t:e}).position;i?(this.todos.map(function(t){return t._id!==o._id&&t.position<i.position?t.position=t.position-1:t._id===o._id&&(t.position=i.position-1),t}),this.todoService.updateAll(this.todos,this.user_id)):(o.position=r+1,this.todoService.update(o))},t.prototype.ngOnInit=function(){var t=this;this.authService.getUserProfile().then(function(e){return t.user_id=e.identities[0].user_id}).then(function(){return t.getAll()})},t.prototype.getAll=function(){var t=this;this.todoService.getAll(this.user_id).then(function(e){return t.todos=e.sort(function(t,e){return t.position-e.position})})},t.prototype.showModal=function(t,e){this.selectedTodo=t,this.showDialog.visible=!this.showDialog.visible,this.showDialog.type=e},t.prototype.edit=function(t){this.selectedTodo=t},t.prototype.delete=function(){var t=this;this.todoService.delete(this.selectedTodo._id).then(function(){t.todos=t.todos.filter(function(e){return e!==t.selectedTodo}),t.selectedTodo=null})},t.prototype.create=function(t){var e,n=this;e=this.todos.length>1?this.todos.reduce(function(t,e){return t.position<e.position?t:e}).position:1===this.todos.length?this.todos[0].position:0;var o={todo:t,done:!1,user_id:this.user_id,position:e-1};this.todoService.create(o).then(function(){return n.getAll()})},t.prototype.cancel=function(){this.getAll()},t.prototype.update=function(t){var e=this;t&&(t.done=!t.done,this.selectedTodo=t),this.todoService.update(this.selectedTodo).then(function(){return e.getAll()})},t=s([n.i(o.Component)({selector:"app-todos-list",template:n(665),styles:[n(660)]}),l("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.a&&r.a)&&e||Object,"function"==typeof(d="undefined"!=typeof i.a&&i.a)&&d||Object,"function"==typeof(u="undefined"!=typeof a.a&&a.a)&&u||Object,"function"==typeof(f="undefined"!=typeof c.DragulaService&&c.DragulaService)&&f||Object])],t);var e,d,u,f}()},382:function(t,e){function n(t){throw new Error("Cannot find module '"+t+"'.")}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id=382},383:function(t,e,n){"use strict";var o=n(496),i=(n.n(o),n(464)),r=n(0),a=n(495),c=n(494);a.a.production&&n.i(r.enableProdMode)(),n.i(i.a)().bootstrapModule(c.a)},490:function(t,e,n){"use strict";var o=n(0),i=n(135),r=n(492),a=n(205),c=(n.n(a),n(323)),s=n(327),l=n(325);n.d(e,"a",function(){return p});var d=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},u=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},f=[{path:"todos",component:s.a,canActivate:[r.a]},{path:"home",component:l.a},{path:"",redirectTo:"/todos",pathMatch:"full"},{path:"about",component:c.a}],p=function(){function t(){}return t=d([n.i(o.NgModule)({imports:[i.b.forRoot(f)],exports:[i.b],providers:[a.AUTH_PROVIDERS,r.a]}),u("design:paramtypes",[])],t)}()},491:function(t,e,n){"use strict";var o=n(133),i=n(0),r=n(457),a=n(129),c=n(324),s=n(327),l=n(323),d=n(325),u=n(493),f=n(366),p=(n.n(f),n(95)),h=n(326),v=n(490);n.d(e,"a",function(){return m});var g=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},b=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},m=function(){function t(){}return t=g([n.i(i.NgModule)({imports:[o.b,r.a,a.HttpModule,v.a,f.DragulaModule],declarations:[c.a,s.a,l.a,d.a,u.a],providers:[h.a,p.a],bootstrap:[c.a]}),b("design:paramtypes",[])],t)}()},492:function(t,e,n){"use strict";var o=n(0),i=n(135),r=n(95);n.d(e,"a",function(){return s});var a=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},c=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},s=function(){function t(t,e){this.authService=t,this.router=e}return t.prototype.canActivate=function(){return!!this.authService.loggedIn()||(this.router.navigate(["/home"]),!1)},t=a([n.i(o.Injectable)(),c("design:paramtypes",["function"==typeof(e="undefined"!=typeof r.a&&r.a)&&e||Object,"function"==typeof(s="undefined"!=typeof i.a&&i.a)&&s||Object])],t);var e,s}()},493:function(t,e,n){"use strict";var o=n(0);n.d(e,"a",function(){return a});var i=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},r=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},a=function(){function t(){this.dialogOptionsChange=new o.EventEmitter}return t.prototype.cancel=function(){this.dialogOptions.visible=!1,this.dialogOptionsChange.emit(this.dialogOptions)},i([n.i(o.Input)(),r("design:type",Object)],t.prototype,"dialogOptions",void 0),i([n.i(o.Output)(),r("design:type",Object)],t.prototype,"dialogOptionsChange",void 0),t=i([n.i(o.Component)({selector:"app-dialog",template:n(663),styles:[n(658)],exportAs:"dialog",animations:[n.i(o.trigger)("dialog",[n.i(o.transition)("void => *",[n.i(o.style)({transform:"scale3d(.3, .3, .3)"}),n.i(o.animate)(100)]),n.i(o.transition)("* => void",[n.i(o.animate)(100,n.i(o.style)({transform:"scale3d(.0, .0, .0)"}))])])]}),r("design:paramtypes",[])],t)}()},494:function(t,e,n){"use strict";var o=(n(324),n(491));n.d(e,"a",function(){return o.a})},495:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var o={production:!0}},496:function(t,e,n){"use strict";var o=n(513),i=(n.n(o),n(506)),r=(n.n(i),n(502)),a=(n.n(r),n(508)),c=(n.n(a),n(507)),s=(n.n(c),n(505)),l=(n.n(s),n(504)),d=(n.n(l),n(512)),u=(n.n(d),n(501)),f=(n.n(u),n(500)),p=(n.n(f),n(510)),h=(n.n(p),n(503)),v=(n.n(h),n(511)),g=(n.n(v),n(509)),b=(n.n(g),n(514)),m=(n.n(b),n(685));n.n(m)},658:function(t,e){t.exports=".overlay{\n  position:fixed;\n  top:0;\n  bottom:0;\n  left:0;\n  right:0;\n  background-color:rgba(0, 0, 0, 0.5);\n  z-index:999;\n}\n\n.dialog{\n  z-index:1000;\n  position:fixed;\n  right:0;\n  left:0;\n  top:4vh;\n  margin-top:10vh;\n  margin-right:auto;\n  margin-left:auto;\n  min-height:25vh;\n  width:90vw;\n  max-width:520px;\n  background-color:#fff;\n  padding:4vh;\n  box-shadow:0 0.7vw 0.8vw -0.4vw rgba(0, 0, 0, 0.2), 0 1.3vw 1.9vw 0.2vw rgba(0, 0, 0, 0.14), 0 0.5vw 2.4vw 0.4vw rgba(0, 0, 0, 0.12);\n}\n\n@media (min-width: 80vw){\n  .dialog{\n    top:4vw;\n  }\n}\n"},659:function(t,e){t.exports=".btn{\n  font-size:2.5em;\n  margin:1em 0 3em;\n  padding:0.5em 1em;\n}\n"},660:function(t,e){t.exports="#del-dialog-header{\n  margin-bottom:30px;\n}\n\n.row-centered{\n  text-align:center;\n}\n\n.col-centered{\n  display:inline-block;\n  float:none;\n  text-align:left;\n  margin-right:-4px;\n}\n\n.list-group{\n  margin-top:2em;\n}\n"},661:function(t,e){t.exports='<div class="container">\n  <h3>About</h3>\n</div><div class="container">\n  <h4>Lorem ipsum dolor sit amet, consectetur adipisicing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.</h4>\n  <div style="height: 10em"></div>\n</div>\n'},662:function(t,e){t.exports='<div class="navbar navbar-default navbar-static-top">\n  <div class="container">\n    <div class="navbar-header">\n      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-ex-collapse">\n        <span class="sr-only">Toggle navigation</span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n        <span class="icon-bar"></span>\n      </button>\n      <a class="navbar-brand" routerLink="/todos"><span>{{title}}</span></a>\n    </div>\n    <div class="collapse navbar-collapse" id="navbar-ex-collapse">\n      <ul class="nav navbar-nav navbar-right">\n        <li *ngIf="!authService.loggedIn()"\n            (click)="authService.login()">\n          <a role="button">Log In</a>\n        </li>\n        <li *ngIf="authService.loggedIn()"\n            (click)="authService.logout()">\n          <a role="button">Log Out</a>\n        </li>\n        <li *ngIf="authService.loggedIn()"\n            routerLinkActive="active">\n          <a routerLink="/todos">Todos</a>\n        </li>\n        <li *ngIf="!authService.loggedIn()"\n            routerLinkActive="active">\n          <a routerLink="/home">Home</a>\n        </li>\n        <li routerLinkActive="active">\n          <a routerLink="/about">About</a>\n        </li>\n      </ul>\n    </div>\n  </div>\n</div>\n\n<router-outlet></router-outlet>\n\n<footer class="section section-primary">\n  <div class="container">\n    <div class="row">\n      <div class="col-sm-6">\n        <h1>Contact Us!</h1>\n        <p>ievgen@lorem.ipsum</p>\n      </div>\n      <div class="col-sm-6">\n        <p class="text-info text-right">\n          <br>\n          <br>\n        </p>\n        <div class="row">\n          <div class="col-md-12 hidden-lg hidden-md hidden-sm text-left">\n            <a href="https://www.facebook.com/profile.php?id=100004862738922">\n              <i class="fa fa-3x fa-fw fa-facebook text-inverse"></i>\n            </a>\n            <a href="https://github.com/deugene">\n              <i class="fa fa-3x fa-fw fa-github text-inverse"></i>\n            </a>\n          </div>\n        </div>\n        <div class="row">\n          <div class="col-md-12 hidden-xs text-right">\n            <a href="https://www.facebook.com/profile.php?id=100004862738922">\n              <i class="fa fa-3x fa-fw fa-facebook text-inverse"></i>\n            </a>\n            <a href="https://github.com/deugene">\n              <i class="fa fa-3x fa-fw fa-github text-inverse"></i>\n            </a>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</footer>\n'},663:function(t,e){t.exports='<div [@dialog] *ngIf="dialogOptions.visible" class="dialog">\n   <ng-content></ng-content>\n</div>\n<div *ngIf="dialogOptions.visible" class="overlay" (click)="cancel()"></div>\n'},664:function(t,e){t.exports='<div class="container">\n   <div class="row">\n     <div class="col-md-12">\n       <h1 class="text-center">Welcome to the Simple Todo App!</h1>\n     </div>\n   </div>\n   <div class="row">\n     <div class="col-md-12 text-center">\n       <a class="btn btn-lg btn-primary"\n          (click)="authService.login()">\n        Sign up!\n      </a>\n     </div>\n   </div>\n </div>\n'},665:function(t,e){t.exports='<div class="container">\n  <h3>My Todos</h3>\n</div>\n<div class="section">\n  <div class="container">\n    <form role="form">\n      <div class="form-group">\n        <label class="control-label" for="newTodo">New todo</label>\n        <input class="form-control"\n                id="newTodo"\n                placeholder="todo"\n                type="text"\n                #newTodo>\n      </div>\n      <button class="btn btn-default"\n              (click)="create(newTodo.value); newTodo.value=\'\'">\n        Add\n      </button>\n    </form>\n    <ul class="list-group">\n      <div class="container-fluid" [dragula]="\'todos-list-bag\'">\n        <li *ngFor="let todo of todos"\n            class="list-group-item clearfix"\n            [id]="todo._id"\n            (click)="update(todo); $event.stopPropagation()"\n            role="button">\n          <input type="checkbox" [checked]="todo.done">\n          <span>{{todo.todo}}</span>\n          <span class="pull-right">\n            <span>\n              <button class="btn btn-xs btn-primary"\n                      (click)="showModal(todo, \'edit\'); $event.stopPropagation()">\n                Edit\n              </button>\n            </span>\n            <span>\n              <button class="btn btn-xs btn-danger"\n                      (click)="showModal(todo, \'delete\'); $event.stopPropagation()">\n                Delete\n              </button>\n            </span>\n          </span>\n        </li>\n      </div>\n    </ul>\n  </div>\n</div>\n\n<app-dialog [(dialogOptions)]="showDialog" #dialog>\n\n  <div *ngIf="showDialog.type === \'delete\'">\n    <div class="text-center">\n      <h1 id="del-dialog-header">Are you shure?</h1>\n      <div class="container-fluid">\n        <div class="row row-centered">\n          <div class="col-md-4 col-centered">\n            <button class="btn-block btn btn-lg btn-primary"\n                    (click)="dialog.cancel()">\n              No\n            </button>\n          </div>\n          <div class="col-md-4 col-centered">\n            <button class="btn-block btn btn-lg btn-danger"\n                    (click)="delete(); dialog.cancel()">\n              Yes\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n\n  <div *ngIf="showDialog.type === \'edit\'">\n    <div class="container-fluid">\n      <h3>Edit task</h3>\n      <div class="form-group" *ngIf="selectedTodo">\n        <label class="control-label" for="task">Todo: </label>\n        <input class="form-control"\n               id="task"\n               (keyup.enter)="update(); dialog.cancel()"\n               [(ngModel)]="selectedTodo.todo" placeholder="todo">\n      </div>\n      <button class="btn btn-default" (click)="dialog.cancel()">\n        Cancel\n      </button>\n      <button class="btn btn-primary" (click)="update(); dialog.cancel()">\n        Save\n      </button>\n    </div>\n  </div>\n\n</app-dialog>\n'},686:function(t,e,n){t.exports=n(383)},95:function(t,e,n){"use strict";var o=n(0),i=n(129),r=n(205),a=(n.n(r),n(135)),c=n(367);n.n(c);n.d(e,"a",function(){return d});var s=this&&this.__decorate||function(t,e,n,o){var i,r=arguments.length,a=r<3?e:null===o?o=Object.getOwnPropertyDescriptor(e,n):o;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(t,e,n,o);else for(var c=t.length-1;c>=0;c--)(i=t[c])&&(a=(r<3?i(a):r>3?i(e,n,a):i(e,n))||a);return r>3&&a&&Object.defineProperty(e,n,a),a},l=this&&this.__metadata||function(t,e){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(t,e)},d=function(){function t(t,e){this.router=t,this.http=e,this.auth0Config()}return t.prototype.auth0Config=function(){var t=this;this.http.get("api/config").toPromise().then(function(e){var n=e.json();if(n.err)throw new Error(n.err);t.lock=new Auth0Lock(n.clientId,n.domain),t.lock.on("authenticated",function(e){t.idToken=e.idToken,localStorage.setItem("id_token",e.idToken),t.getUserProfile().then(function(){return t.router.navigate(["todos"])})})}).catch(function(){return console.error("auth0 config error")})},t.prototype.getUserProfile=function(){var t=this;return new Promise(function(e){var n=JSON.parse(localStorage.getItem("profile"));return n?void e(n):void t.lock.getProfile(t.idToken,function(t,n){if(t)throw new Error(t.message);localStorage.setItem("profile",JSON.stringify(n)),e(n)})})},t.prototype.login=function(){this.lock.show()},t.prototype.logout=function(){localStorage.removeItem("profile"),localStorage.removeItem("id_token"),this.idToken=null,this.router.navigate(["home"])},t.prototype.loggedIn=function(){return n.i(r.tokenNotExpired)("id_token",localStorage.getItem("id_token")||this.idToken)},t=s([n.i(o.Injectable)(),l("design:paramtypes",["function"==typeof(e="undefined"!=typeof a.a&&a.a)&&e||Object,"function"==typeof(c="undefined"!=typeof i.Http&&i.Http)&&c||Object])],t);var e,c}()}},[686]);
//# sourceMappingURL=main.234393435e4ea5c416f8.bundle.map